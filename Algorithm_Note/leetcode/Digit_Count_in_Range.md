# 1067. 范围内的数字计数

给定一个在 `0` 到 `9` 之间的整数 `d`，和两个正整数 `low` 和 `high` 分别作为上下界。返回 `d` 在 `low` 和 `high` 之间的整数中出现的次数，包括边界 `low` 和 `high`。

**示例 1：**
输入：d = 1, low = 1, high = 13
输出：6
解释： 
数字 d=1 在 1,10,11,12,13 中出现 6 次。注意 d=1 在数字 11 中出现两次。

**示例 2：**
输入：d = 3, low = 100, high = 250
输出：35
解释：
数字 d=3 在 103,113,123,130,131,...,238,239,243 出现 35 次。


### 数学

首先要知道以下的规律：

- 从 1 至 10，在它们的个位数中，任意的 X 都出现了 1 次。
- 从 1 至 100，在它们的十位数中，任意的 X 都出现了 10 次。
- 从 1 至 1000，在它们的千位数中，任意的 X 都出现了 100 次。

依此类推，从 1 至 10i10i，在它们的左数第二位（右数第 ii 位）中，任意的 X 都出现了 10i−110i−1 次。

这个规律很容易验证，这里不再多做说明。

接下来以 n=2593,X=5n=2593,X=5 为例来解释如何得到数学公式。从 1 至 2593 中，数字 5 总计出现了 813 次，其中有 259 次出现在个位，260 次出现在十位，294 次出现在百位，0 次出现在千位。

现在依次分析这些数据，首先是个位。从 1 至 2590 中，包含了 259 个 10，因此任意的 X 都出现了 259 次。最后剩余的三个数 2591, 2592 和 2593，因为它们最大的个位数字 3 < X，因此不会包含任何 5。

然后是十位。从 1 至 2500 中，包含了 25 个 100，因此任意的 X 都出现了 25×10=25025×10=250 次。剩下的数字是从 2501 至 2593，它们最大的十位数字 9 > X，因此会包含全部 10 个 5。最后总计 250 + 10 = 260。

接下来是百位。从 1 至 2000 中，包含了 2 个 1000，因此任意的 X 都出现了 2×100=2002×100=200 次。剩下的数字是从 2001 至 2593，它们最大的百位数字 5 == X，这时情况就略微复杂，它们的百位肯定是包含 5 的，但不会包含全部 100 个。如果把百位是 5 的数字列出来，是从 2500 至 2593，数字的个数与百位和十位数字相关，是 93+1 = 94。最后总计 200 + 94 = 294。

最后是千位。现在已经没有更高位，因此直接看最大的千位数字 2 < X，所以不会包含任何 5。到此为止，已经计算出全部数字 5 的出现次数。

```c
int cout(int target, int n) {
    long res = 0;
    for (int i = 1; i <= n; i *= 10) {
        int base = i * 10;
        res += (n/base)*i + fmin(i, fmax(0, (n%base)-(target*i)+1));    // fmin：加i或者不加（负数）
        if (target == 0) res -= i;  // 删去 0xx 的情况（010，020，030，040...）
    }
    return res;
}

int digitsCount(int d, int low, int high) {
    return cout(d, high) - cout(d, low-1);
}
```



