# 1590. 使数组和能被 P 整除

给你一个正整数数组 `nums`，请你移除 **最短** 子数组（可以为 **空**），使得剩余元素的 **和** 能被 `p` 整除。 **不允许** 将整个数组都移除。

请你返回你需要移除的最短子数组的长度，如果无法满足题目要求，返回 `-1` 。

**子数组** 定义为原数组中连续的一组元素。

**示例：**

```
输入：nums = [3,1,4,2], p = 6
输出：1
解释：nums 中元素和为 10，不能被 p 整除。我们可以移除子数组 [4] ，剩余元素的和为 6 。
```



## 前缀和 + HashMap

```java
class Solution {
    public int minSubarray(int[] nums, int p) {
        int N = nums.length, mod = 0;
        for (int n : nums) mod = (mod + n) % p;
        if (mod == 0) return 0;

        Map<Integer, Integer> map = new HashMap<>(); 
        map.put(0, -1);  // !!!
        int res = N, curMod = 0;
        for (int i = 0; i < N; i++) {
            curMod = (curMod + nums[i]) % p;      // 当前前缀和除以 P 的余数是 curMod
            int tarMod = (curMod - mod + p) % p;  // 为了找到一段连续子数组对 P 的余数是 mod
            if (map.containsKey(tarMod)) {        // 需要找到一段前缀和，对 P 的余数是 tarMod
                res = Math.min(res, i - map.get(tarMod));
                if (res == 1) return res;
            }
            map.put(curMod, i);
        }
        return res==N ? -1 : res;
    }
}
```

