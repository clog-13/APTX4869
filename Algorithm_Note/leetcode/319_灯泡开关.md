# 319. 灯泡开关

初始时有 *n* 个灯泡关闭。 第 1 轮，你打开所有的灯泡。 第 2 轮，每两个灯泡你关闭一次。 第 3 轮，每三个灯泡切换一次开关（如果关闭则开启，如果开启则关闭）。第 *i* 轮，每 *i* 个灯泡切换一次开关。 对于第 *n* 轮，你只切换最后一个灯泡的开关。 找出 *n* 轮后有多少个亮着的灯泡。

**示例:**

```
输入: 3
输出: 1 
解释: 
初始时, 灯泡状态 [关闭, 关闭, 关闭].
第一轮后, 灯泡状态 [开启, 开启, 开启].
第二轮后, 灯泡状态 [开启, 关闭, 开启].
第三轮后, 灯泡状态 [开启, 关闭, 关闭]. 

你应该返回 1，因为只有一个灯泡还亮着。
```

## 数学 + 脑筋急转弯

不严谨的说就是 2 关闭的会被 4 打开，3 关闭的会被 9 打开...

所以答案就是n的算术平方根下取整，

例如 

n= 9,  res=3

n=10, res=3

n=11, res=3

...

n=16, res=4（4关闭的第16个被16打开） 

```java
class Solution {
    public int bulbSwitch(int n) {
        return (int)Math.sqrt(n);
    }
}
```



## 模拟

```java
class Solution {
    public int bulbSwitch(int n) {
        int res = 0;
        int[] arr = new int[n];
        for (int i=0; i<arr.length; i++) arr[i] = 1;
        
        for (int i=2; i<=n; i++) {
            for (int j=i-1; j<n; j+=i) {
                arr[j] = ((j + 1) % i == 0) ? arr[j] ^ 1 : arr[j];
            }
        }
        
        for (int i=0; i<n; i++) {
            res = arr[i] == 1 ? res += 1 : res;
        }
        return res;
    }
}
```

